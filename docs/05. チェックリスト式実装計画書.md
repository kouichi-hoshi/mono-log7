---
title: 05. チェックリスト式実装計画書
created: 2025-12-05
description: フェーズ別に進捗を管理するためのチェックリスト
---

# チェックリスト式実装計画書

## 運用前提
- 参照必須: `docs/02. 要件定義書.md`、`docs/03. 設計書.md`、`docs/04. 作業計画書.md`、`docs/06. 表示テキスト定義.md`、`AGENTS.md`。
- 開発方針: TDD（Red→Green→Refactor）を前提に、未実装の依存はスタブ／モックで先行し、接続ポイント（例: `authAdapter` / `postRepository`）で環境変数切替する。本番ではスタブ無効ガードを入れる。
- テスト: UI／ロジックは Jest+RTL、認証／DBは Route Handler + Server Action + Prisma で結合テスト。`NODE_ENV=test` ではスタブを無効化する。

## ステータス記号と更新手順
- 記号: `☐` 未着手 / `△` 進行中 / `☑` 完了 / `✕` 中止
- 更新手順:
  - 着手前に対象行を `△` にし、必要に応じて期日・担当を追記。
  - 作業完了で `☑` にし、完了条件を満たした根拠（テスト名や確認方法）をコメントとして残す。
  - 仕様変更で無効になった場合は `✕` とし、理由をコメントに残す。

## 共通テンプレ
- カラム: 状態 / ID / 概要 / 完了条件 / 前提ID / 担当 / 期日(YYYY-MM-DD または `-`)
- ID命名: `P{フェーズ}-{領域}-{通番2桁}` 例) `P1-UI-01`
- 完了条件にはテスト/確認方法を含める。
- 前提ID: 依存するタスクのID（複数ある場合はカンマ区切り、なしの場合は `-`）
- 記入例:

| 状態 | ID | 概要 | 完了条件 | 前提ID | 担当 | 期日 |
| --- | --- | --- | --- | --- | --- | --- |
| ☐ | Pn-XX-01 | サンプル | Red→Green→Refactorを完了し、関連テストがGREEN | - | - | 2025-12-31 |

## フェーズ別チェックリスト

### フェーズ0
| 状態 | ID | 概要 | 完了条件 | 前提ID | 担当 | 期日 |
| --- | --- | --- | --- | --- | --- | --- |
| ☑ | P0-SET-01 | `AGENTS.md` 設定と遵守導線の確認 | READMEに「開発者向けガイド」を追加しAGENTSの禁止事項/方針を参照導線化 | - | - | - |
| ☑ | P0-SET-02 | 必読ドキュメントの配置確認 | `docs/01-06` の配置確認済み＋READMEから主要ドキュメントへの導線を追加 | - | - | - |

### フェーズ1

**完了時の到達点**: スタブモードでUIの一通りの操作が確認できる状態（Vercelデモ用デプロイ可能）

**実行順序**: 1-A → 1-B → 1-C → 1-D → 1-E → 1-F → 1-G

**スタブ環境変数**:
- `NEXT_PUBLIC_USE_STUB_AUTH=true` — 認証スタブ有効
- `NEXT_PUBLIC_USE_STUB_POSTS=true` — 投稿CRUDスタブ有効
- 本番（`NODE_ENV=production`）では上記が設定されていてもスタブ無効

#### サブフェーズ1-A: 環境構築・基盤

| 状態 | ID | 概要 | 完了条件 | 前提ID | 担当 | 期日 |
| --- | --- | --- | --- | --- | --- | --- |
| ☐ | P1-ENV-01 | Next.js 15 プロジェクト初期化 | `next dev` が起動し、サンプルページが表示される。テストファイル作成可能 | - | - | - |
| ☐ | P1-ENV-02 | Biome設定 | `pnpm lint` / `pnpm format` が動作し、設定ファイルがコミット済み | P1-ENV-01 | - | - |
| ☐ | P1-ENV-03 | Jest + React Testing Library セットアップ | サンプルテストが `pnpm test` でGREEN。`jest.config.*` とテストスクリプトが整備済み | P1-ENV-01 | - | - |
| ☐ | P1-ENV-04 | TailwindCSS + shadcn/ui 初期化 | shadcn CLI でコンポーネント追加可能。`components.json` が設定済み | P1-ENV-01 | - | - |
| ☐ | P1-ADP-01 | 環境変数によるスタブ切替機構 | `NEXT_PUBLIC_USE_STUB_AUTH` / `NEXT_PUBLIC_USE_STUB_POSTS` で切替可能。`NODE_ENV=production` でスタブ無効ガード実装済み | P1-ENV-01 | - | - |
| ☐ | P1-ADP-02 | authAdapter スタブ実装 | スタブログイン/ログアウト/セッション取得が動作。環境変数で切替可能。テストでGREEN | P1-ADP-01 | - | - |
| ☐ | P1-ADP-03 | postRepository スタブ実装 | スタブCRUD（create/read/update/delete/softDelete）が動作。環境変数で切替可能。テストでGREEN | P1-ADP-01 | - | - |

#### サブフェーズ1-B: 共通UIパーツ

| 状態 | ID | 概要 | 完了条件 | 前提ID | 担当 | 期日 |
| --- | --- | --- | --- | --- | --- | --- |
| ☐ | P1-UI-01 | Button（shadcn） | コンポーネント追加済み。Storybookまたはテストで表示確認。再利用可能 | P1-ENV-04 | - | - |
| ☐ | P1-UI-02 | Spinner（shadcn + フェード演出） | フェードイン/アウトが動作。レイアウトシフト防止（高さ保持）。テストでマウント/アンマウント確認 | P1-UI-01 | - | - |
| ☐ | P1-UI-03 | Dialog（shadcn） | 開閉動作。×ボタン/背景クリックで閉じる。テストでGREEN | P1-UI-01 | - | - |
| ☐ | P1-UI-04 | Alert / Alert-Dialog（shadcn） | 確認ダイアログの表示・ボタン押下で閉じる。テストでGREEN | P1-UI-01 | - | - |
| ☐ | P1-UI-05 | Toast（shadcn） | 成功/エラー/警告の各種トースト表示。ユーティリティhooks/コンポーネントで共通化。テストでGREEN | P1-UI-01 | - | - |
| ☐ | P1-UI-06 | Checkbox（shadcn） | チェック状態の切替。controlled/uncontrolled対応。テストでGREEN | P1-UI-01 | - | - |
| ☐ | P1-UI-07 | Popover（shadcn） | 開閉動作。外側クリックで閉じる。テストでGREEN | P1-UI-01 | - | - |

#### サブフェーズ1-C: レイアウト・認証UI

| 状態 | ID | 概要 | 完了条件 | 前提ID | 担当 | 期日 |
| --- | --- | --- | --- | --- | --- | --- |
| ☐ | P1-LAY-01 | 共通レイアウト（Header/Main/Footer枠） | 基本レイアウト構造がレスポンシブで表示。md以上で左右分割対応 | P1-UI-01 | - | - |
| ☐ | P1-LAY-02 | Header（未ログイン状態） | アプリ名＋ログインボタンのみ表示。テストでGREEN | P1-LAY-01 | - | - |
| ☐ | P1-LAY-03 | Header（ログイン状態）枠 | md以上: 表示切替/ゴミ箱リンク/ユーザーアイコンの枠を表示。md未満: ユーザーアイコンのみ表示（表示切替はフッターへ）。テストでGREEN | P1-LAY-01 | - | - |
| ☐ | P1-LAY-04 | ミドルウェアでのセッション判定 | スタブセッションで未ログイン/ログイン中の画面分岐。テストでGREEN | P1-ADP-02,P1-LAY-01 | - | - |
| ☐ | P1-AUTH-01 | ログインボタン | 押下でモーダル表示（状態管理のみ）。テストでGREEN | P1-LAY-02,P1-UI-03 | - | - |
| ☐ | P1-AUTH-02 | ログインモーダル（枠のみ） | Dialog内に「Googleでログイン」ボタン表示。×/背景で閉じる。テストでGREEN | P1-AUTH-01 | - | - |
| ☐ | P1-AUTH-03 | ログインモーダル → スタブ認証連携 | ボタン押下でauthAdapter経由のスタブログイン実行。セッション更新後画面切替。テストでGREEN | P1-AUTH-02,P1-ADP-02 | - | - |
| ☐ | P1-AUTH-04 | ユーザーアイコン + Popover（枠のみ） | アイコン押下でポップオーバー開閉。ユーザー名表示。テストでGREEN | P1-LAY-03,P1-UI-07 | - | - |
| ☐ | P1-AUTH-05 | ログアウトリンク | ポップオーバー内リンク押下でスタブログアウト。セッション更新後画面切替。テストでGREEN | P1-AUTH-04,P1-ADP-02 | - | - |
| ☐ | P1-LAY-05 | Footer（共通枠） | 外部リンク（GitHub/X/お問い合わせ）＋コピーライト表示。テストでGREEN | P1-UI-01 | - | - |
| ☐ | P1-LAY-06 | Footer（ログイン中・md未満） | md未満で表示切替ボタン＋ゴミ箱リンクを表示。テストでGREEN | P1-LAY-05,P1-FLT-01 | - | - |
| ☐ | P1-WELC-01 | ウェルカムメッセージ表示 | 未ログイン時にメッセージ＋ログインボタン表示。表示テキスト定義を参照。テストでGREEN | P1-LAY-02 | - | - |

#### サブフェーズ1-D: 投稿エディタ

| 状態 | ID | 概要 | 完了条件 | 前提ID | 担当 | 期日 |
| --- | --- | --- | --- | --- | --- | --- |
| ☐ | P1-EDIT-01 | エディタ枠（tiptap設置） | tiptapエディタが表示され、テキスト入力可能。テストでGREEN | P1-ENV-04 | - | - |
| ☐ | P1-EDIT-02 | モードチェックボックス（メモ/ToDo） | 初期値メモ。切替動作。テストでGREEN | P1-EDIT-01,P1-UI-06 | - | - |
| ☐ | P1-EDIT-03 | 保存ボタン（未入力時Alert） | 未入力で保存押下時にAlertを表示。テストでGREEN | P1-EDIT-01,P1-UI-04 | - | - |
| ☐ | P1-EDIT-04 | 保存ボタン → スタブCRUD連携 | postRepository.create呼出。成功トースト表示。テストでGREEN | P1-EDIT-03,P1-ADP-03,P1-UI-05 | - | - |
| ☐ | P1-EDIT-05 | 保存後のクリア＋フォーカス | 保存成功後にエディタクリア。フォーカス戻し。テストでGREEN | P1-EDIT-04 | - | - |
| ☐ | P1-EDIT-06 | 編集モード切替（既存投稿ロード） | 編集ボタン押下で該当投稿をエディタにセット。モードも反映。テストでGREEN | P1-EDIT-02,P1-ADP-03 | - | - |
| ☐ | P1-EDIT-07 | 更新ボタン＋キャンセルボタン | 編集時は「更新」ラベル。キャンセルで元に戻る。更新処理はpostRepository.update経由。テストでGREEN | P1-EDIT-06 | - | - |

#### サブフェーズ1-E: 投稿一覧

| 状態 | ID | 概要 | 完了条件 | 前提ID | 担当 | 期日 |
| --- | --- | --- | --- | --- | --- | --- |
| ☐ | P1-LIST-01 | 一覧コンテナ（スピナー演出付き） | ローディング中はスピナー表示。完了後フェードアウト。レイアウトシフト防止。テストでGREEN | P1-UI-02 | - | - |
| ☐ | P1-LIST-02 | スタブデータ10件の初期ロード | postRepository.findMany → 更新日降順で10件表示。キャッシュ保持。テストでGREEN | P1-LIST-01,P1-ADP-03 | - | - |
| ☐ | P1-LIST-03 | 個別投稿アイテム（表示のみ） | モード/投稿日/更新日/本文を表示。テストでGREEN | P1-LIST-02 | - | - |
| ☐ | P1-LIST-04 | 個別投稿アイテム（編集ボタン） | ボタン押下でエディタに切替（P1-EDIT-06と連携）。テストでGREEN | P1-LIST-03,P1-EDIT-06 | - | - |
| ☐ | P1-LIST-05 | 個別投稿アイテム（ゴミ箱ボタン） | ボタン押下でpostRepository.softDelete。一覧から消える。テストでGREEN | P1-LIST-03,P1-ADP-03 | - | - |
| ☐ | P1-LIST-06 | 並び替えUIボタン群（G1/G2） | 更新順/投稿順/手動順 × 昇順/降順のボタン表示。テストでGREEN | P1-LIST-02 | - | - |
| ☐ | P1-LIST-07 | 並び替えロジック（G1/G2連動） | ボタン押下で一覧の並び順が変わる。テストでGREEN | P1-LIST-06 | - | - |
| ☐ | P1-LIST-08 | 手動並び替え（上下ボタン） | +/-ボタンで1件ずつ移動。md未満でも動作。テストでGREEN | P1-LIST-02 | - | - |
| ☐ | P1-LIST-09 | 手動並び替え（D&D、md以上） | dnd-kitでドラッグ&ドロップ動作。md以上のみ有効。テストでGREEN | P1-LIST-08 | - | - |

#### サブフェーズ1-F: 表示切替・ゴミ箱

| 状態 | ID | 概要 | 完了条件 | 前提ID | 担当 | 期日 |
| --- | --- | --- | --- | --- | --- | --- |
| ☐ | P1-FLT-01 | 表示切替ボタン群（すべて/メモ/ToDo） | 各ボタンで一覧フィルタが切り替わる。テストでGREEN | P1-LIST-02 | - | - |
| ☐ | P1-FLT-02 | クエリパラメータ連動（mode=） | URLパラメータで状態保持。戻る/進むで復元。テストでGREEN | P1-FLT-01 | - | - |
| ☐ | P1-DIA-01 | 日記モードトグル（Popover内） | ユーザーアイコンPopoverにトグル追加。UI状態を保持（スタブDB保存）。テストでGREEN | P1-AUTH-04,P1-UI-06 | - | - |
| ☐ | P1-DIA-02 | 日記モード有効時の表示切替 | 「日記」ボタン表示。「すべて」に日記含む。モードチェックに「日記」追加。テストでGREEN | P1-DIA-01,P1-FLT-01,P1-EDIT-02 | - | - |
| ☐ | P1-TRASH-01 | ゴミ箱ビュー枠（view=trash） | クエリパラメータでゴミ箱表示に切替。通常一覧のキャッシュ保持。テストでGREEN | P1-FLT-02 | - | - |
| ☐ | P1-TRASH-02 | ゴミ箱一覧（trashedのみ表示） | status=trashedの投稿をスタブから取得・表示。テストでGREEN | P1-TRASH-01,P1-ADP-03 | - | - |
| ☐ | P1-TRASH-03 | 選択チェックボックス（個別/一括） | チェック状態管理。「n件選択中」表示。全選択/部分選択対応。テストでGREEN | P1-TRASH-02,P1-UI-06 | - | - |
| ☐ | P1-TRASH-04 | 復元ボタン | 押下でstatus=activeに変更。一覧から消える。通常一覧キャッシュ更新。テストでGREEN | P1-TRASH-03,P1-ADP-03 | - | - |
| ☐ | P1-TRASH-05 | 削除ボタン＋確認モーダル | 押下で確認モーダル表示。キャンセル/確定の2パス。削除実行。テストでGREEN | P1-TRASH-03,P1-UI-04 | - | - |
| ☐ | P1-TRASH-06 | ゴミ箱を空にする | 一括削除確認モーダル。実行。テストでGREEN | P1-TRASH-05 | - | - |

#### サブフェーズ1-G: エラーハンドリング

| 状態 | ID | 概要 | 完了条件 | 前提ID | 担当 | 期日 |
| --- | --- | --- | --- | --- | --- | --- |
| ☐ | P1-ERR-01 | 開発用エラーシミュレーション（?errorTest=） | 各種トースト表示（auth/authorization/notfound/validation/server/generic/success）。表示後パラメータ除去。テストでGREEN | P1-UI-05 | - | - |
| ☐ | P1-ERR-02 | 本番環境でのシミュレーション無効化 | `NODE_ENV=production` でスキップ。テストでGREEN | P1-ERR-01 | - | - |

### フェーズ2

**完了時の到達点**: 本番Google認証・DB接続が完成し、実際に使える状態でデプロイ可能

| 状態 | ID | 概要 | 完了条件 | 前提ID | 担当 | 期日 |
| --- | --- | --- | --- | --- | --- | --- |
| ☐ | P2-DB-01 | DB接続（Prisma + 本番想定DB） | 接続設定が有効でCRUDが実行可能、マイグレーション手順を整備 | P1-ADP-03 | - | - |
| ☐ | P2-AUTH-01 | Auth.js Route Handlers 本番接続 | Google OAuthでサインイン/アウトし、セッションがUIに反映 | P1-ADP-02 | - | - |
| ☐ | P2-TIM-01 | 投稿ソート（投稿日/更新日 × 昇降） | サーバーデータを指定条件でソートしUIが反映 | P2-DB-01,P1-LIST-07 | - | - |
| ☐ | P2-NSC-01 | 無限スクロール（Server Actions + TanStack Query） | バッチ取得・スピナー・全件取得メッセージが動作 | P2-DB-01,P1-LIST-02 | - | - |
| ☐ | P2-ACC-01 | アカウント削除 | ユーザーデータ削除後セッション終了し、完了メッセージ表示 | P2-AUTH-01,P2-DB-01 | - | - |
| ☐ | P2-TAG-01 | 投稿タグ基本（追加/削除/ラベル編集） | タグが保存・表示・更新され、初期値nullを保持 | P2-DB-01 | - | - |
| ☐ | P2-APP-01 | 外観変更（ライト/ダーク/システム・文字サイズ） | 切替がUIに反映し、必要なら永続化される | - | - | - |
| ☐ | P2-TST-01 | 認証/DB/無限スクロール等のテスト拡充 | 設計書テスト戦略の対象がGREEN（統合/E2E含む） | P2-AUTH-01,P2-DB-01 | - | - |

### フェーズ3
| 状態 | ID | 概要 | 完了条件 | 前提ID | 担当 | 期日 |
| --- | --- | --- | --- | --- | --- | --- |
| ☐ | P3-SRCH-01 | テキスト検索（タイトル/本文/モード/タグ） | 入力→検索→一致結果が表示される | P2-DB-01 | - | - |
| ☐ | P3-TAG-02 | カスタムタグ管理 | 追加/編集/削除ができ、削除時に紐づく投稿は「タグ未登録」扱い | P2-TAG-01 | - | - |
| ☐ | P3-LIF-01 | ゴミ箱自動削除 | ゴミ箱滞留期限後に自動削除される | P2-DB-01 | - | - |
| ☐ | P3-EXP-01 | 投稿エクスポート検討/実装 | エクスポート方式を決定し、必要な処理/画面を実装 | P2-DB-01 | - | - |

## 依存関係メモ

### フェーズ1内の依存
- **1-A完了** → 1-B〜1-G着手可能
- **1-B完了** → 1-C〜1-F内のUI実装が加速
- **1-C（認証UI）** → 1-D/1-E/1-Fで認証状態を参照
- **1-D（エディタ）** → 1-E（一覧）の編集ボタンと連携
- **1-F（表示切替）** → 1-E（一覧）のフィルタリングに依存

### フェーズ間の依存
- **フェーズ1の接続ポイント雛形（P1-ADP-01〜03）** がフェーズ2以降の本番接続の前提。
- **認証・DB系テスト（P2-TST-01）** は P2-AUTH-01 / P2-DB-01 完了後に着手。
- **検索・タグ・自動削除などフェーズ3の機能** は、フェーズ2までのCRUD/タグ実装が前提。
