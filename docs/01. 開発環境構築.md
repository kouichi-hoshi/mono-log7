---
title: 01. 開発環境構築
source:
author:
  -
published:
created: 2025-12-02
description:
tags:
---
## 前提

- 本リポジトリは **pnpm** を利用する（`docs/03. 設計書.md` の「開発プロセス／開発方針」を参照）
- 秘匿情報（APIキー等）は **絶対にハードコードしない／コミットしない**
  - ローカル用の環境変数は `.env.local` を利用する（gitignore前提）

## 初回セットアップ

- 依存関係のインストール
	- `pnpm install`
- 開発サーバー起動
	- `pnpm dev`
- テスト実行
	- `pnpm test`

## スタブモード（ローカル開発の推奨）

日常の開発では、認証・CRUDが未完成でも UI/ロジックを先に進めるため、スタブを利用する。

- スタブ有効化（例）
	- `NEXT_PUBLIC_USE_STUB_AUTH=true`
	- `NEXT_PUBLIC_USE_STUB_POSTS=true`
- 注意
	- 本番環境（`NODE_ENV=production`）では上記が設定されていても **スタブが有効にならない**ガードを前提とする（詳細は `docs/03. 設計書.md` と `lib/authAdapter.ts` / `lib/postRepository.ts` を参照）

## 開発用コマンド（ローカルDB）

- ローカルDB(PostgresQL)起動
	- brew services start postgresql@17
- ローカルDB終了
	- brew services stop postgresql@17
- ローカルDBの起動状況確認
	- brew services list

## 環境変数（メモ）

- `.env` / `.env.local` の方針は `docs/03. 設計書.md` を参照
- DB接続を行う場合のキー例
	- `DATABASE_URL`
	- `DATABASE_DIRECT_URL`（マイグレーション用）
