---
title: 04. 作業計画書
source:
author:
  -
published:
created: 2025-11-25
description:
tags:
---
# フェーズ0
- cursor設定
	- [AGENTS.md](http://AGENTS.md)を設定する
# フェーズ1
- 開発環境構築
	- フレームワーク、ライブラリをインストールする
		- 03. 設計書「採用技術・構成技術」を参照
- 基本のUIパーツ作成
	- button / dialog / alert / spinner / checkbox / toast など、未ログイン・ログイン中で共通利用する shadcn/ui コンポーネントを用意する
- レイアウト・画面分岐（フェーズ1完了条件）
	- ミドルウェアでセッション判定し、未ログイン／ログイン中の画面を切り替える
	- 未ログイン画面: ヘッダー（アプリ名＋ログインボタン）、メイン（ウェルカムメッセージ＋ログインボタン）、フッター（コピーライトのみ）
	- ログイン中画面（スタブまたは簡易実装可）: ヘッダー（表示切替＋「ゴミ箱を見る」リンク＋ユーザーアイコン＋ログアウトリンクポップオーバー）、メイン（エディタ固定＋投稿一覧、md以上は左右分割でエディタ固定）、フッター（コピーライトのみ）
- 認証UI（スタブでOK）
	- ログインボタン押下でモーダル表示、「Googleでログイン」ボタン、閉じる操作（×/背景）
- 投稿エディタ基本挙動
	- モードチェック（メモ/ToDo、日記モード有効時は日記も選択可、初期値メモ）、保存/更新ボタン（未入力はAlert）、保存後はクリア＋フォーカス＋トースト（保存/更新）、編集時のみキャンセル
- 投稿一覧の初期機能
	- 初期ロード: 直近10件を更新日降順で表示、スピナー演出あり
	- 各投稿要素: モード/投稿日/更新日/本文/ゴミ箱アイコン/編集ボタン（インライン編集差し替え）
	- 並び替えUI: G1（更新順/投稿順/手動順）× G2（昇順/降順）
	- 手動並び替え: 上下ボタン、md以上はドラッグ＆ドロップ用ツマミ
- 表示切替・ゴミ箱ビュー枠
	- 「すべて/メモ/ToDo」（日記モード有効時は「日記」も表示）切替（クエリパラメータ `mode` で保持）、ゴミ箱表示 `view=trash`（キャッシュ保持）、ゴミ箱では選択/復元/削除・まとめ削除用モーダルの枠を用意
- 日記モード機能
	- ユーザーアイコンのポップオーバーに「日記モードを有効にする」トグルを追加
	- 日記モードの表示/非表示設定をデータベースのユーザー設定テーブルに保存
	- 日記モードが有効な場合、表示切替ボタンに「日記」を追加
	- 「すべて」は日記モード有効時、日記も含む
- エラーハンドリング・フィードバック
	- トースト/アラート表示、開発環境のみ `?errorTest=...` で各種トーストを表示し、表示後はクエリ除去（本番では無効）
- スピナー演出
	- shadcn スピナーをフェードイン/フェードアウトし、レイアウトシフトを防ぐ
- 接続ポイントの準備
	- 環境変数でスタブ/本番を切替える `authAdapter` / `postRepository` 雛形を用意し、本番ではスタブ無効のガードを想定
- テスト（TDD）
	- 上記主要UI/ロジックの単体テストを Red→Green で作成

# フェーズ2
- DB接続
- ユーザー認証（Route Handlers を利用し Auth.js で本番接続）
- タイムライン機能の拡張
	- 投稿一覧のソート機能（投稿日／更新日 × 昇順／降順、G1/G2ボタンで制御）
	- 無限スクロールを本番の DB + Server Actions + TanStack Query で実現する
- アカウント管理
	- アカウント削除機能（DB のユーザーデータ削除、セッション終了、完了メッセージ表示）
- タグ・外観
	- 投稿保存時のタグ付与（初期値 null、基本的な追加／削除／ラベル編集）
	- 外観変更（システム／ライト／ダーク、文字サイズの変更）
- テストの充実
	- 認証（Route Handlers）、DB（Prisma）、無限スクロール、ソート、タグ、外観を含む単体・結合テストを追加する
	- 詳細なテスト内容は 03. 設計書の「テスト戦略」を参照

# フェーズ3
- 検索・整理機能の強化
	- テキスト検索（タイトル／本文／モード／タグを対象）
- タグ機能の拡張
	- カスタムタグ追加／編集／削除
	- タグ削除時の挙動（タグが付いていた投稿は「タグ未登録」とする）
- 投稿のライフサイクル管理
	- ゴミ箱投入日から一定日数経過後の自動削除
- 投稿エクスポート（検討）
	- 具体的なエクスポート形式・操作は今後検討（ToDo）

※ 各フェーズの詳細な画面仕様・要件は `02. 要件定義書.md`、内部構造・テスト方針は `03. 設計書.md` を参照すること。
